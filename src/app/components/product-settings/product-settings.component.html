<div class="container pl-30 pr-30" *ngIf="showData">
  <h2 class="">Product Settings</h2>
  <div class="dash-line"></div>
  <p class="text-right pt-3"><span class="red">*</span> All Fields are mandatory</p>
  <div class="shadow1 mt-4 pt-4 pb-5 pl-30 pr-30">
    <h5 class="text-color pt-2">Product Type Selection</h5>
    <hr>
    <form [formGroup]="UsageSettingFormGroup">
      <div class="row mb-3 mt-4 pt-2">
        <div class="col-md-2 col-sm-12">
          <div class="">
            <label class="select-label1">Product Code <span class="red">*</span></label>
          </div>
        </div>
        <div class="col-md-4 col-sm-12">
          <div class="">
            <select class="form-control br" formControlName="productCode"
              [ngClass]="{ 'is-invalid': submitted && UsageSettingFormGroup.get('productCode').errors }"
              (change)="selectProductCode()">
              <option value="">Select </option>
              <option *ngFor="let product of productCode" value={{product.productCode}}>
                {{product.productCode}}
              </option>
            </select>
            <div *ngIf="submitted && UsageSettingFormGroup.get('productCode').errors" class="invalid-feedback">
              <div *ngIf="UsageSettingFormGroup.get('productCode').errors.required">Please Select Product Code</div>
            </div>
          </div>
        </div>
        <div class="col-md-2 col-sm-12">
          <div class="">
            <label class="select-label1">Product Name <span class="red">*</span></label>
          </div>
        </div>
        <div class="col-md-4 col-sm-12">
          <div class="">
            <input class="form-control br" formControlName="productName" readonly
              [ngClass]="{ 'is-invalid': submitted && UsageSettingFormGroup.get('productName').errors }" />
            <div *ngIf="submitted && UsageSettingFormGroup.get('productName').errors" class="invalid-feedback">
              <div *ngIf="UsageSettingFormGroup.get('productName').errors.required">Product Name is required</div>
            </div>
          </div>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-2 col-sm-12">
          <div class="">
            <label class="select-label1">Product Description <span class="red">*</span></label>
          </div>
        </div>
        <div class="col-md-4 col-sm-12">
          <div class="">
            <input class="form-control br" formControlName="productDesc" readonly
              [ngClass]="{ 'is-invalid': submitted && UsageSettingFormGroup.get('productDesc').errors }" />
            <div *ngIf="submitted && UsageSettingFormGroup.get('productDesc').errors" class="invalid-feedback">
              <div *ngIf="UsageSettingFormGroup.get('productDesc').errors.required">Product Description is required
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-2 col-sm-12">
          <div class="">
            <label class="select-label1">Product Currency <span class="red">*</span></label>
          </div>
        </div>
        <div class="col-md-4 col-sm-12">
          <div class="">
            <input class="form-control br" formControlName="prodCurr" readonly
              [ngClass]="{ 'is-invalid': submitted && UsageSettingFormGroup.get('prodCurr').errors }" />
            <div *ngIf="submitted && UsageSettingFormGroup.get('prodCurr').errors" class="invalid-feedback">
              <div *ngIf="UsageSettingFormGroup.get('prodCurr').errors.required">Product Currency is required</div>
            </div>
          </div>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-2 col-sm-12">
          <div class="">
            <label class="select-label1">Effective Date <span class="red">*</span></label>
          </div>
        </div>
        <div class="col-md-4 col-sm-12">
          <div class="">
            <input type="date" class="form-control br" formControlName="effectiveDate" />
          </div>
        </div>
      </div>


      <h5 class="text-color pt-2">Usage Setting Definition</h5>
      <hr>
      <div class="row mb-3 mt-4 pt-2">
        <div class="col-md-2 col-sm-12">
          <div class="">
            <label class="select-label1">Usage Type <span class="red">*</span></label>
          </div>
        </div>
        <div class="col-md-4 col-sm-12">
          <div class="">
            <select class="form-control br" formControlName="usageType" (change)="selectUsageSetting()"
              [ngClass]="{ 'is-invalid':submitted && UsageSettingFormGroup.get('usageType').errors}">
              <option value="">Select</option>
              <option value="0">Country</option>
              <option value="1">DeliveryChannel</option>
              <option value="2">Acquiring Network</option>
              <option value="3">Card Usage Setting</option>
              <option value="4">Merchant Category</option>
              <option value="5">Limit Management</option>
              <option value="6">Fee Management</option>
              <option value="7">Alert Setting</option>
            </select>
            <div *ngIf="submitted && UsageSettingFormGroup.get('usageType').errors " class="invalid-feedback ">
              <div *ngIf="UsageSettingFormGroup.get('usageType').errors.required ">Usage type should not be empty.</div>
            </div>
            <div style="color:red;" *ngIf="isExist">
              Already Exist.
            </div>
          </div>
        </div>
      </div>
      <div class="row mb-3">
        <div class="col-md-2 col-sm-12">
          <div class="">
            <label class="select-label1">Usage Code <span class="red">*</span></label>
          </div>
        </div>
        <div class="col-md-4 col-sm-12">
          <div class="">
            <select class="form-control" formControlName="code"
              [ngClass]="{ 'is-invalid':submitted && UsageSettingFormGroup.get('usageType').errors}">
              <option value="">Select</option>
              <option *ngFor="let c of code" value="{{c.settingId}}">{{c.settingName}}</option>
            </select>
            <div *ngIf="submitted && UsageSettingFormGroup.get('code').errors " class="invalid-feedback ">
              <div *ngIf="UsageSettingFormGroup.get('code').errors.required ">Usage Code should not be empty.</div>
            </div>
          </div>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-2 col-sm-12">
          <div class="">
            <label class="select-label1">Usage Restriction <span class="red">*</span></label>
          </div>
        </div>
        <div class="col-md-4 col-sm-12">
          <div class="">
            <select class="form-control" formControlName="usageRestriction">
              <option value="">Select</option>
              <option value="allow">Allow</option>
              <option value="restrict">Restrict</option>
            </select>
          </div>
        </div>
      </div>
      <div class="col-md-12 text-center mt-5 mb-4">
        <input type="button" class="btn btn1 shadow1 btnSubmit bg-green text-white" value="Add"
          (click)="addToTable()" />
      </div>
      <div class="table-responsive">
        <table class="table table-striped table-bordered table-hover text-center">
          <thead class="thead-dark bg-green text-white">
            <tr>
              <th scope="col">Select</th>
              <th scope="col">Product Code</th>
              <th scope="col">Product Name</th>
              <th scope="col">Product Description</th>
              <th scope="col">Product Currency</th>
              <th scope="col">Effective Date</th>
              <th scope="col">Usage Type</th>
              <th scope="col">Usage Code</th>
              <th scope="col">Remove</th>
            </tr>
          </thead>
          <tbody formArrayName="usageSettingFormArraygroup"
            *ngFor="let r of UsageSettingFormGroup.get('usageSettingFormArraygroup').controls;index as i">
            <tr [formGroupName]="i" class="form-group">
              <input type="hidden" formControlName="productId">
              <input type="hidden" formControlName="usageDescription">
              <input type="hidden" formControlName="usageRestriction">
              <input type="hidden" formControlName="insertedBy">
              <input type="hidden" formControlName="modifiedBy">
              <input type="hidden" formControlName="insertedDate">
              <input type="hidden" formControlName="modifiedDate">
              <td></td>
              <td><input type="text" class="form-control text-center" style="border: none;width: 120px;"
                  formControlName="productCode" readonly></td>
              <td><input type="text" class="form-control text-center" style="border: none;width: 120px;"
                  formControlName="productName" readonly></td>
              <td><input type="text" class="form-control text-center" style="border: none;width: 120px;"
                  formControlName="productDesc" readonly></td>
              <td><input type="text" class="form-control text-center" style="border: none;width: 120px;"
                  formControlName="prodCurr" readonly></td>
              <td><input type="text" class="form-control" style="border:none; width: 120px;"
                  formControlName="effectiveDate" readonly></td>
              <td><input type="text" class="form-control text-center" style="border: none;width: 120px;"
                  formControlName="usageType" readonly></td>
              <td><input type="text" class="form-control text-center" style="border: none;width: 120px;"
                  formControlName="code" readonly></td>
              <td><input type="button" value="remove" (click)="remove(i)"></td>
            </tr>
          </tbody>
        </table>

      </div>
      <div class="row">
        <div class="col-12 text-center">
          <input type="button" class="btn btn-success" value="Confirm" (click)="confirmData()" />
        </div>
      </div>

    </form>

  </div>
</div>




<div class="shadow1 mt-5 pt-4 pb-5 pl-30 pr-30" *ngIf="confirm">
  <h5 class="text-color pt-2">Plastic Set up Details</h5>
  <hr>
  <form>
    <div class="table-responsive" *ngFor="let data of confirmForm.usageSettingFormArraygroup; index as i">
      <table class="table table-bordered">

        <tr>
          <th colspan="6" class="bg-dark text-light">{{i+1}}).</th>
        </tr>
        <tr>
          <th scope="col">Product Code</th>
          <td>{{data.productCode}}</td>
          <th scope="col">Product Name</th>
          <td colspan="3">{{data.productName}}</td>
        </tr>
        <tr>
          <th scope="col">Product Description</th>
          <td>{{data.productDesc}}</td>
          <th scope="col">Product Currency</th>
          <td colspan="3">{{data.prodCurr}}</td>
        </tr>
        <tr>
          <th scope="col">Usage Type</th>
          <td>{{data.usageType}}</td>
          <th scope="col">Usage Code</th>
          <td>{{data.code}}</td>
          <th scope="col">Usage Restriction</th>
          <td>{{data.usageRestriction}}</td>
        </tr>
      </table>
      <hr style="border:1px solid gray;">
    </div>

    <div class=" row col-md-12 text-center mt-5">
      <input type="button" class="btn btn1 shadow1 btnSubmit bg-color text-white" value="Cancel" (click)="back()" />
      <input type="button" class="btn btn1 shadow1 btnSubmit bg-color text-white ml-2" value="Confirm"
        (click)="save()" />
    </div>
  </form>
</div>

<div class="modal" id="success" role="dialog">
  <div class="modal-dialog modal-dialog-centered">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header bg-info">
        <h3 class="text-light">Success</h3>
        <button type="button" class="close" (click)="close()" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
        <h4>{{success}}</h4>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-info" data-dismiss="modal" (click)="close()">Close</button>
      </div>
    </div>

  </div>
</div>

<div class="modal" id="error" role="dialog">
  <div class="modal-dialog modal-dialog-centered">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header bg-danger">
        <h3 class="text-light">Error</h3>
        <button type="button" class="close" (click)="close()" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
        <h4>{{success}}</h4>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="close()">Close</button>
      </div>
    </div>

  </div>
</div>