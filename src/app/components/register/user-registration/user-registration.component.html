<div class="container pl-30 pr-30" *ngIf="isEntity">
    <h2 class="">Create User</h2>
    <div class="dash-line"></div>
    <div class="shadow1 mt-5 pt-4 pb-5 pl-30 pr-30">
        <div class="container row">
            <div class="col-md-5"></div>
            <div class="col-md-7 row">
                <div class="col-md-6">
                    <div class="form-group" [formGroup]="selectEntityForm">
                        <label for="entity">Select Entity: </label>
                        <select class="form-control" formControlName="entity" (change)="selectEntity()">
                            <option value="">Select</option>
                            <option *ngFor="let r of entity" value="{{r.cmsClientId}}">{{r.cmsCompanyName}}</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <div class="row col-md-12 alert alert-info text-center" role="alert" *ngIf="show">
            <strong> {{errorMessage}} </strong>
        </div>
    </div>
</div>

<div class="container pl-30 pr-30" *ngIf="createUser">
    <h2 class="">User Registration</h2>
    <div class="dash-line"></div>
    <div class="shadow1 mt-5 pt-4 pb-5 pl-30 pr-30">
        <h5 class="text-color pt-2">Entity Details</h5>
        <hr>
        <div class="table-responsive mt-4 mb-5">
            <table class="table table-striped table-bordered table-hover text-center">
                <thead class="thead-dark bg-color text-white">
                    <tr>
                        <th scope="col">Entity Name</th>
                        <th scope="col">Country</th>
                        <th scope="col">State</th>
                        <th scope="col">City</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>{{entityName}}</td>
                        <td>{{entityCountry}}</td>
                        <td>{{entityState}}</td>
                        <td>{{entityCity}}</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <form [formGroup]="createUserForm" (ngSubmit)="confirm()">
            <div class="row">
                <div class="col-md-6 col-sm-12">
                    <div class="row">
                        <div class="col-md-4 col-sm-12">
                            <label class="col-form-label">User ID<span style="color: red;">*</span></label>
                        </div>
                        <div class="form-group col-md-8 col-sm-12">
                            <input type="text" maxlength="12" class="form-control" formControlName="userID" [ngClass]="{ 'is-invalid':submitted && createUserForm.get('userID').errors}" />
                            <div *ngIf="submitted && createUserForm.get('userID').errors" class="invalid-feedback ">
                                <div *ngIf="createUserForm.get('userID').errors.required">User ID should not be empty.
                                </div>
                                <div *ngIf="createUserForm.get('userID').errors.pattern">User ID is invalid.</div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="col-md-6 col-sm-12">
                    <div class="row">
                        <div class="col-md-4 col-sm-12">
                            <label class="col-form-label">Employee No.<span style="color: red;">*</span></label>
                        </div>
                        <div class="form-group col-md-8 col-sm-12 ">
                            <input type="text" maxlength="8" class="form-control" formControlName="employeeNo" [ngClass]="{ 'is-invalid':submitted && createUserForm.get('employeeNo').errors}" />
                            <div *ngIf="submitted && createUserForm.get('employeeNo').errors" class="invalid-feedback ">
                                <div *ngIf="createUserForm.get('employeeNo').errors.required">Employee No. should not be empty. </div>
                                <div *ngIf="createUserForm.get('employeeNo').errors.pattern">Employee No. is invalid.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="row">
                <div class="col-md-6 col-sm-12">
                    <div class="row">
                        <div class="col-md-4 col-sm-12">
                            <label class="col-form-label">First Name<span style="color: red;">*</span></label>
                        </div>
                        <div class="form-group col-md-8 col-sm-12">
                            <input type="text" maxlength="20" class="form-control" formControlName="firstName" [ngClass]="{ 'is-invalid':submitted && createUserForm.get('firstName').errors}" />
                            <div *ngIf="submitted && createUserForm.get('firstName').errors" class="invalid-feedback ">
                                <div *ngIf="createUserForm.get('firstName').errors.required">First Name should not be empty.
                                </div>
                                <div *ngIf="createUserForm.get('firstName').errors.pattern">First Name is invalid.</div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="col-md-6 col-sm-12  ">
                    <div class="row">
                        <div class="col-md-4 col-sm-12 ">
                            <label class="col-form-label">Last Name<span style="color: red;">*</span></label>
                        </div>
                        <div class="form-group col-md-8 col-sm-12 ">
                            <input type="text" maxlength="20" class="form-control" formControlName="lastName" [ngClass]="{ 'is-invalid':submitted && createUserForm.get('lastName').errors}" />
                            <div *ngIf="submitted && createUserForm.get('lastName').errors" class="invalid-feedback ">
                                <div *ngIf="createUserForm.get('lastName').errors.required">Last Name should not be empty.
                                </div>
                                <div *ngIf="createUserForm.get('lastName').errors.pattern">Last Name is invalid.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="row">
                <div class="col-md-6 col-sm-12 ">
                    <div class="row">
                        <div class="col-md-4 col-sm-12">
                            <label class="col-form-label">Designation<span style="color: red;">*</span></label>
                        </div>
                        <div class="form-group col-md-8 col-sm-12">
                            <input type="text" maxlength="50" class="form-control" formControlName="designation" [ngClass]="{ 'is-invalid':submitted && createUserForm.get('designation').errors}" />
                            <div *ngIf="submitted && createUserForm.get('designation').errors" class="invalid-feedback ">
                                <div *ngIf="createUserForm.get('designation').errors.required">Designation should not be empty.
                                </div>
                                <div *ngIf="createUserForm.get('designation').errors.pattern">Designation is invalid.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-sm-12  ">
                    <div class="row">
                        <div class="col-md-4 col-sm-12 ">
                            <label class="col-form-label">Passport No.<span style="color: red;">*</span></label>
                        </div>
                        <div class="form-group col-md-8 col-sm-12 ">
                            <input type="text" maxlength="8" class="form-control" formControlName="passportNo" [ngClass]="{ 'is-invalid':submitted && createUserForm.get('passportNo').errors}" />
                            <div *ngIf="submitted && createUserForm.get('passportNo').errors" class="invalid-feedback ">
                                <div *ngIf="createUserForm.get('passportNo').errors.required">Passport No. should not be empty.
                                </div>
                                <div *ngIf="createUserForm.get('passportNo').errors.pattern">Passport No. is invalid.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="row">
                <div class="col-md-6 col-sm-12 ">
                    <div class="row">
                        <div class="col-md-4 col-sm-12">
                            <label>Telephone(Res)</label>
                        </div>
                        <div class="form-group col-md-8 col-sm-12">
                            <input type="text" maxlength="10" class="form-control" formControlName="telephoneRes">
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-sm-12  ">
                    <div class="row">
                        <div class="col-md-4 col-sm-12 ">
                            <label class="col-form-label">Telephone(Off)<span style="color: red;">*</span></label>
                        </div>
                        <div class="form-group col-md-8 col-sm-12 ">
                            <input type="text" class="form-control" maxlength="10" formControlName="telephoneOff" [ngClass]="{ 'is-invalid':submitted && createUserForm.get('telephoneOff').errors}" />
                            <div *ngIf="submitted && createUserForm.get('telephoneOff').errors" class="invalid-feedback ">
                                <div *ngIf="createUserForm.get('telephoneOff').errors.required">Telephone Off. should not be empty.
                                </div>
                                <div *ngIf="createUserForm.get('telephoneOff').errors.pattern">Telephone Off. is invalid.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="row">
                <div class="col-md-6 col-sm-12 ">
                    <div class="row">
                        <div class="col-md-4 col-sm-12">
                            <label class="col-form-label">Mobile <span style="color: red;">*</span></label>
                        </div>
                        <div class="form-group col-md-8 col-sm-12">
                            <input type="text" class="form-control" maxlength="10" formControlName="mobile" [ngClass]="{ 'is-invalid':submitted && createUserForm.get('mobile').errors}" />
                            <div *ngIf="submitted && createUserForm.get('mobile').errors" class="invalid-feedback ">
                                <div *ngIf="createUserForm.get('mobile').errors.required">Mobile should not be empty.
                                </div>
                                <div *ngIf="createUserForm.get('mobile').errors.pattern">Mobile is invalid.</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 col-sm-12">
                    <div class="row">
                        <div class="col-md-4 col-sm-12 ">
                            <label>Fax No.</label>
                        </div>
                        <div class="form-group col-md-8 col-sm-12 ">
                            <input type="text" maxlength="10" class="form-control" formControlName="faxno">
                        </div>
                    </div>
                </div>
            </div>


            <div class="row">
                <div class="col-md-6 col-sm-12 ">
                    <div class="row">
                        <div class="col-md-4 col-sm-12">
                            <label class="col-form-label">Country <span style="color: red;">*</span></label>
                        </div>
                        <div class="form-group col-md-8 col-sm-12">
                            <select class="form-control" formControlName="country" (change)="selectState()" [ngClass]="{ 'is-invalid':submitted && createUserForm.get('country').errors}">
                                <option value="">Select</option>
                                <option *ngFor="let country of countries " value="{{country.countryId}} ">
                                    {{country.countryName}}</option>
                            </select>
                            <div *ngIf="submitted && createUserForm.get('country').errors" class="invalid-feedback ">
                                <div *ngIf="createUserForm.get('country').errors.required">Country should not be empty.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-sm-12  ">
                    <div class="row">
                        <div class="col-md-4 col-sm-12 ">
                            <label class="col-form-label">State <span style="color: red;">*</span></label>
                        </div>
                        <div class="form-group col-md-8 col-sm-12 ">
                            <select class="form-control" formControlName="state" (change)="selectCity()" [ngClass]="{ 'is-invalid':submitted && createUserForm.get('state').errors}">
                                <option value="">Select</option>
                                <option *ngFor="let state of states " value="{{state.stateId}} ">{{state.stateName}}
                                </option>
                            </select>
                            <div *ngIf="submitted && createUserForm.get('state').errors" class="invalid-feedback ">
                                <div *ngIf="createUserForm.get('state').errors.required">State should not be empty.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>



            <div class="row">
                <div class="col-md-6 col-sm-12 ">
                    <div class="row">
                        <div class="col-md-4 col-sm-12">
                            <label class="col-form-label">City <span style="color: red;">*</span></label>
                        </div>
                        <div class="form-group col-md-8 col-sm-12">
                            <select class="form-control" formControlName="city" [ngClass]="{ 'is-invalid':submitted && createUserForm.get('city').errors}">
                                <option value="">Select</option>
                                <option *ngFor="let city of cities " value="{{city.cityId}} ">{{city.cityName}}</option>
                            </select>
                            <div *ngIf="submitted && createUserForm.get('city').errors" class="invalid-feedback ">
                                <div *ngIf="createUserForm.get('city').errors.required">City should not be empty.</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-sm-12  ">
                    <div class="row">
                        <div class="col-md-4 col-sm-12 ">
                            <label class="col-form-label">Post Code <span style="color: red;">*</span></label>
                        </div>
                        <div class="form-group col-md-8 col-sm-12 ">
                            <input type="text" maxlength="6" class="form-control" formControlName="postCode" [ngClass]="{ 'is-invalid':submitted && createUserForm.get('postCode').errors}" />
                            <div *ngIf="submitted && createUserForm.get('postCode').errors" class="invalid-feedback ">
                                <div *ngIf="createUserForm.get('postCode').errors.required">Post Code should not be empty.
                                </div>
                                <div *ngIf="createUserForm.get('postCode').errors.pattern">Post Code is invalid.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 col-sm-12  ">
                    <div class="row">
                        <div class="col-md-4 col-sm-12 ">
                            <label>Region</label>
                        </div>
                        <div class="form-group col-md-8 col-sm-12 ">
                            <input type="text" class="form-control" formControlName="region">
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-sm-12 ">
                    <div class="row">
                        <div class="col-md-4 col-sm-12">
                            <label class="col-form-label">Email <span style="color: red;">*</span></label>
                        </div>
                        <div class="form-group col-md-8 col-sm-12">
                            <input type="email" maxlength="60" class="form-control" formControlName="email" [ngClass]="{ 'is-invalid':submitted && createUserForm.get('email').errors}" />
                            <div *ngIf="submitted && createUserForm.get('email').errors" class="invalid-feedback ">
                                <div *ngIf="createUserForm.get('email').errors.required">Email should not be empty.
                                </div>
                                <div *ngIf="createUserForm.get('email').errors.pattern">Email is invalid.</div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="row">
                <div class="col-md-6 col-sm-12  ">
                    <div class="row">
                        <div class="col-md-4 col-sm-12 ">
                            <label class="col-form-label">Currency Conversion Agent<span
                                    style="color: red;">*</span></label>
                        </div>
                        <div class="form-group col-md-8 col-sm-12 ">
                            <select class="form-control" formControlName="currencyAgent" [ngClass]="{ 'is-invalid':submitted && createUserForm.get('currencyAgent').errors}">
                                <option value="">Select</option>
                                <option value="Master ">Master</option>
                                <option value="Visa ">Visa</option>
                                <option value="Rupay ">Rupay</option>
                            </select>
                            <div *ngIf="submitted && createUserForm.get('currencyAgent').errors" class="invalid-feedback ">
                                <div *ngIf="createUserForm.get('currencyAgent').errors.required">Currency Conversion Agent should not be empty.</div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="col-md-6 col-sm-12 ">
                    <div class="row">
                        <div class="col-md-4 col-sm-12">
                            <label class="col-form-label">Expiry Date<span style="color: red;">*</span></label>
                        </div>
                        <div class="form-group col-md-8 col-sm-12">
                            <input type="date" data-date-format="dd/MM/yyyy" for class="form-control" formControlName="expiryDate" [ngClass]="{ 'is-invalid':submitted && createUserForm.get('userID').errors}" />
                            <input type="hidden" formControlName="cmsClient">
                            <input type="hidden" formControlName="user">
                            <div *ngIf="submitted && createUserForm.get('expiryDate').errors" class="invalid-feedback ">
                                <div *ngIf="createUserForm.get('expiryDate').errors.required">Expiry Date should not be empty.
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div class="row">
                <div class="col-md-12 text-center mt-5">
                    <input type="submit" class="btn btn1 shadow1 btnSubmit bg-color text-white" value="Submit" />
                    <input type="reset" class="btn btn1 shadow1 btnSubmit bg-color text-white ml-2" value="Reset" />
                </div>
            </div>

        </form>
    </div>
</div>

<div class="container pl-30 pr-30" *ngIf="isConfirm">
    <h2 class="">Confirm Entity</h2>
    <div class="dash-line"></div>
    <div class="shadow1 mt-5 pt-4 pb-5 pl-30 pr-30">
        <div class="container row">
            <div class="col-md-12">
                <table class="table table-bordered">
                    <thead>
                        <th colspan="4">User Detail</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="font">User ID</td>
                            <td>{{userid}}</td>
                            <td class="font">Employee No</td>
                            <td>{{employeeno}}</td>
                        </tr>

                        <tr>
                            <td class="font">First Name</td>
                            <td>{{firstname}}</td>
                            <td class="font">Last Name</td>
                            <td>{{lastname}}</td>
                        </tr>


                        <tr>
                            <td class="font">Designation</td>
                            <td>{{designation}}</td>
                            <td class="font">Passport No.</td>
                            <td>{{passport}}</td>
                        </tr>


                        <tr>
                            <td class="font">Telephone(Res.)</td>
                            <td>{{telephoneRes}}</td>
                            <td class="font">Telephone(Off.)</td>
                            <td>{{telephoneOff}}</td>
                        </tr>


                        <tr>
                            <td class="font">Mobile</td>
                            <td>{{mobile}}</td>
                            <td class="font">Fax</td>
                            <td>{{fax}}</td>
                        </tr>



                        <tr>
                            <td class="font">Country</td>
                            <td>{{country}}</td>
                            <td class="font">State</td>
                            <td>{{state}}</td>
                        </tr>


                        <tr>
                            <td class="font">City</td>
                            <td>{{city}}</td>
                            <td class="font">Region</td>
                            <td>{{region}}</td>
                        </tr>


                        <tr>
                            <td class="font">PostCode</td>
                            <td>{{postcode}}</td>
                            <td class="font">Email</td>
                            <td>{{email}}</td>
                        </tr>


                        <tr>
                            <td class="font">Currency Conversion Agent</td>
                            <td>{{currencyAgent}}</td>
                            <td class="font">Expiry Date</td>
                            <td>{{expirtDate}}</td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="4">
                                <div class="col-md-12 text-center mt-5">
                                    <input type="submit" class="btn btn1 shadow1 btnSubmit bg-color text-white" value="Confirm" (click)="save()" />
                                    <input type="button" class="btn btn1 shadow1 btnSubmit bg-color text-white ml-2" value="Cancel" (click)="cancel()" />
                                </div>
                            </td>
                        </tr>
                    </tfoot>
                </table>

            </div>
        </div>
    </div>

</div>




<div class="modal" id="success" role="dialog">
    <div class="modal-dialog modal-dialog-centered">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header bg-info">
                <h3 class="text-light">Success</h3>
                <button type="button" class="close" (click)="close()" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <h4>{{success}}</h4>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-info" data-dismiss="modal" (click)="close()">Close</button>
            </div>
        </div>

    </div>
</div>

<div class="modal" id="error" role="dialog">
    <div class="modal-dialog modal-dialog-centered">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header bg-danger">
                <h3 class="text-light">Error</h3>
                <button type="button" class="close" (click)="close()" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <h4>{{success}}</h4>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="close()">Close</button>
            </div>
        </div>

    </div>
</div>