<div class="container pl-30 pr-30" *ngIf="entrData">
    <h2 class="">Usage Settings - Delivery Channel Group</h2>
    <div class="dash-line"></div>
    <p class="text-right pt-3"><span class="red">*</span> All Fields are mandatory</p>
    <div class="shadow1 mt-4 pt-4 pb-5 pl-30 pr-30">
        <h5 class="text-color pt-2">Create New Group</h5>
        <hr>
        <form [formGroup]="deliveryGroupComponent" (ngSubmit)="confirmDelivery()">
            <div class=" row mb-3 mt-4 ">
                <div class="col-md-2 col-sm-12 ">
                    <div class=" ">
                        <label class="select-label1 ">Group Code <span class="red ">*</span></label>
                    </div>
                </div>
                <div class="col-md-4 col-sm-12 ">
                    <div class=" ">
                        <input type="hidden" formControlname="groupId">
                        <input type="hidden" formControlname="insertedBy">
                        <input type="hidden" formControlname="modifiedBy">
                        <input type="hidden" formControlname="insertedDate">
                        <input type="hidden" formControlname="modifiedDate">
                        <input type="text " formControlName="groupCode" class="form-control br " name="groupCode" (input)="isInput()" [ngClass]="{ 'is-invalid':submitted && deliveryGroupComponent.get( 'groupCode').errors}" />
                        <div *ngIf="submitted && deliveryGroupComponent.get('groupCode').errors " class="invalid-feedback ">
                            <div *ngIf="deliveryGroupComponent.get('groupCode').errors.required ">Group Code should not be empty.</div>
                            <div *ngIf="deliveryGroupComponent.get('groupCode').errors.pattern ">Do not use special character (@!#$%^&*()).</div>
                            <div *ngIf="deliveryGroupComponent.get('groupCode').errors.maxlength || deliveryGroupComponent.get('groupCode').errors.minlength">Length should be between 10 to 20 char.</div>
                        </div>
                        <div *ngIf="isgroupCodeExist" style="color: red">
                            Group code already exist.
                        </div>
                    </div>
                </div>
                <div class="col-md-2 col-sm-12 ">
                    <div class=" ">
                        <label class="select-label1 ">Group Name <span class="red ">*</span></label>
                    </div>
                </div>
                <div class="col-md-4 col-sm-12 ">
                    <div class=" ">
                        <input type="text" formControlName="groupName" class="form-control br" [ngClass]="{ 'is-invalid':submitted && deliveryGroupComponent.get('groupName').errors}" />
                        <div *ngIf="submitted && deliveryGroupComponent.get('groupName').errors " class="invalid-feedback ">
                            <div *ngIf="deliveryGroupComponent.get('groupName').errors.required ">Group Name should not be empty.</div>
                            <div *ngIf="deliveryGroupComponent.get('groupName').errors.pattern ">Do not use special character (@!#$%^&*()).</div>
                            <div *ngIf="deliveryGroupComponent.get('groupName').errors.maxlength || deliveryGroupComponent.get('groupName').errors.minlength">Length should be between 10 to 20 char.</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mb-3 ">
                <div class="col-md-2 col-sm-12 ">
                    <div class=" ">
                        <label class="select-label1 ">Group Description <span class="red ">*</span></label>
                    </div>
                </div>
                <div class="col-md-4 col-sm-12 ">
                    <div class=" ">
                        <input type="text" formControlName="groupDescription" class="form-control br" [ngClass]="{ 'is-invalid':submitted && deliveryGroupComponent.get('groupDescription').errors}" />
                        <div *ngIf="submitted && deliveryGroupComponent.get('groupDescription').errors " class="invalid-feedback ">
                            <div *ngIf="deliveryGroupComponent.get('groupDescription').errors.required ">Group Description should not be empty.</div>
                            <div *ngIf="deliveryGroupComponent.get('groupDescription').errors.pattern ">Do not use special character (@!#$%^&*()).</div>
                            <div *ngIf="deliveryGroupComponent.get('groupDescription').errors.maxlength || deliveryGroupComponent.get('groupDescription').errors.minlength">Length should be between 10 to 20 char.</div>
                        </div>
                    </div>
                </div>
            </div>
            <h5 class="text-color pt-2 mt-5 ">Delivery Channel Settings</h5>
            <hr>
            <div class="row mb-3 mt-4 ">
                <div class="col-md-2 col-sm-12 ">
                    <div class=" ">
                        <label class="select-label1 ">Delivery Channel <span class="red ">*</span></label>
                    </div>
                </div>
                <div class="col-md-4 col-sm-12 ">
                    <select class="form-control br " formControlName="groupDeliveryChannel" (change)="selectDeliveryChannel()" [ngClass]="{ 'is-invalid':submitted && deliveryGroupComponent.get('groupDeliveryChannel').errors}">
                            <option value="">Select</option>
                            <option *ngFor="let data of deliveryChannelId" value="{{data.delId}}">{{data.delCode}}</option>
                            </select>
                    <div *ngIf="submitted && deliveryGroupComponent.get('groupDeliveryChannel').errors " class="invalid-feedback">
                        <div *ngIf="deliveryGroupComponent.get('groupDeliveryChannel').errors.required ">Delivery Channel should not be empty.</div>
                    </div>

                </div>
                <div class="col-md-2 col-sm-12 ">
                    <div class=" ">
                        <label class="select-label1 ">Channel Description <span class="red ">*</span></label>
                    </div>
                </div>
                <div class="col-md-4 col-sm-12 ">
                    <input type="text" formControlName="groupDeliveryChannelDesc" class="form-control br " readonly>
                </div>
            </div>
            <div class="row mb-3 ">
                <div class="col-md-2 col-sm-12 ">
                    <div class=" ">
                        <label class="select-label1 ">Transactions <span class="red">*</span></label>
                    </div>
                </div>
                <div class="col-md-4 col-sm-12 ">
                    <select class="form-control br " formControlName="groupTransactionChannel" (change)="selectTransaction()" [ngClass]="{'is-invalid':submitted && deliveryGroupComponent.get('groupTransactionChannel').errors}">
                            <option value="">Select</option>
                            <option *ngFor="let data of transactions" value="{{data.transId}}">{{data.transGroupName}}</option>
                           </select>
                    <div *ngIf="submitted && deliveryGroupComponent.get('groupTransactionChannel').errors " class="invalid-feedback">
                        <div *ngIf="deliveryGroupComponent.get('groupTransactionChannel').errors.required ">Transaction should not be empty.</div>
                    </div>
                </div>
                <div class="col-md-2 col-sm-12 ">
                    <div class=" ">
                        <label class="select-label1">Transactions Description<span class="red">*</span></label>
                    </div>
                </div>
                <div class="col-md-4 col-sm-12">
                    <input type="text" class="form-control br " formControlName="groupTransactionChannelDesc" readonly>
                </div>
            </div>
            <div class="col-md-12 text-center mt-5 ">
                <input type="button" class="btn btn1 shadow1 btnSubmit bg-color text-white " value="Add" (click)="addToTable()" />
            </div>

            <div class="table-responsive mt-5 ">
                <table class="table table-striped table-bordered table-hover text-center ">
                    <thead class="thead-dark bg-color text-white ">
                        <tr>
                            <th scope="col ">Delivery Channel</th>
                            <th scope="col ">Transactions</th>
                            <th>Remove</th>
                        </tr>
                    </thead>

                    <tbody formArrayName="deliveryGroups" *ngFor="let r of deliveryGroupComponent.get('deliveryGroups').controls; index as i">
                        <tr [formGroupName]="i" class="form-group">
                            <input type="hidden" formControlName="groupId">
                            <input type="hidden" formControlName="groupCode">
                            <input type="hidden" formControlName="groupName">
                            <input type="hidden" formControlName="groupDescription">
                            <input type="hidden" formControlName="insertedBy">
                            <input type="hidden" formControlName="insertedDate">
                            <input type="hidden" formControlName="modifiedBy">
                            <input type="hidden" formControlName="modifiedDate">

                            <td><input type="text" class="form-control text-center" style="border: none;" formControlName="groupDeliveryChannel" readonly></td>
                            <td><input type="text" class="form-control text-center" style="border: none;" formControlName="groupTransactionChannel" readonly></td>
                            <td><input type="button" value="remove" (click)="remove(i)"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-md-12 text-center mt-5 ">
                <input type="button" class="btn btn1 shadow1 btnSubmit bg-color text-white " value="Cancel" (click)="reset()" />
                <input type="submit" class="btn btn1 shadow1 btnSubmit bg-color text-white ml-2 " value="Submit " />
            </div>
        </form>
    </div>
</div>

<!--            for view             -->

<div class="container pl-30 pr-30" *ngIf="confirm">
    <h2 class="">Usage Settings - View Delivery Channel-Confirm</h2>
    <div class="dash-line"></div>

    <div class="shadow1 mt-5 pt-4 pb-5 pl-30 pr-30" *ngFor="let data of channelsForm">
        <h5 class="text-color pt-2">Delivery Channel Group Details</h5>
        <hr>
        <form>
            <div class="table-responsive ">
                <table class="table table-borderless">

                    <tr>
                        <th scope="col">Group code</th>
                        <td>{{data.groupCode}}</td>
                        <th scope="col">Group Name</th>
                        <td>{{data.groupName}}</td>
                    </tr>


                    <tr>
                        <th scope="col"> Group Description</th>
                        <td>{{data.groupDesc}}</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                    </tr>

                </table>
            </div>

            <h5 class="text-color pt-2">Delivery Channel Settings</h5>
            <hr>
            <div class="row mb-3 mt-4">
                <div class="col-md-4 col-sm-12">
                    <div class="">
                        <label class="font-weight-bold color-black pl-2">Delivery Channel</label>
                    </div>
                </div>
                <div class="col-md-4 col-sm-12">
                    <div class="pl-2">
                        <label class="font-weight-bold color-black">Transactions</label>
                    </div>
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-md-4 col-sm-12">
                    <div class="pl-2">
                        <p>{{data.deliveryChannels}}</p>
                    </div>
                </div>
                <div class="col-md-4 col-sm-12">
                    <div class="pl-2">
                        <p>{{data.transactions}}</p>
                    </div>
                </div>
            </div>

        </form>
    </div>
    <div class=" row col-md-12 text-center mt-5 ">
        <input type="button" class="btn btn1 shadow1 btnSubmit bg-color text-white " value="Cancel" (click)="cancel()" />
        <input type="submit" class="btn btn1 shadow1 btnSubmit bg-color text-white ml-2 " value="Confirmed" (click)="save()" />
    </div>


</div>

<div class="modal" id="success" role="dialog">
    <div class="modal-dialog modal-dialog-centered">

        <!-------------------------------------------------------->
        <!-------------------------------------------------------->
        <!-------------------------------------------------------->
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header bg-info">
                <h3 class="text-light">Success</h3>
                <button type="button" class="close" (click)="close()" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <h4>{{success}}</h4>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-info" data-dismiss="modal" (click)="close()">Close</button>
            </div>
        </div>

    </div>
</div>

<div class="modal" id="error" role="dialog">
    <div class="modal-dialog modal-dialog-centered">

        <!-------------------------------------------------------->
        <!-------------------------------------------------------->
        <!-------------------------------------------------------->
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header bg-danger">
                <h3 class="text-light">Error</h3>
                <button type="button" class="close" (click)="close()" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <h4>{{success}}</h4>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="close()">Close</button>
            </div>
        </div>

    </div>
</div>